---
import Layout from '../components/layout/Layout.astro';
import '../styles/global.css';

const seoData = {
  title: "Contacto - Herencia Cósmica",
  description: "¿Tienes preguntas sobre tu herencia cósmica? Contacta con nosotros. Estamos aquí para guiarte en tu viaje cósmico.",
  keywords: "contacto herencia cósmica, consulta astrológica, soporte carta natal",
  ogImage: "/images/og-contacto.jpg"
};
---

<Layout {...seoData}>
  <section class="relative min-h-screen flex items-center justify-center overflow-hidden pt-32 pb-20">
    <!-- Background Effects -->
    <div class="absolute inset-0 -z-10">
      <div class="absolute top-1/4 left-1/4 w-64 h-64 bg-purple-500/20 rounded-full blur-3xl animate-pulse"></div>
      <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse delay-1000"></div>
    </div>

    <div class="container mx-auto px-6 relative z-10">
      <div class="max-w-2xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12">
          <h1 class="text-4xl md:text-6xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-indigo-400 bg-clip-text text-transparent mb-6">
            Conecta con Nosotros
          </h1>
          <p class="text-xl text-white/80">
            Estamos aquí para guiarte en tu camino de autodescubrimiento.
          </p>
        </div>

        <!-- Contact Form Card -->
        <div class="bg-white/5 backdrop-blur-lg rounded-3xl p-8 md:p-10 border border-white/10 shadow-2xl mb-12">
          <form 
            id="contact-form" 
            action="https://formspree.io/f/mbddrwan"
            method="POST"
            class="space-y-6"
          >
            <div>
              <label for="name" class="block text-white/90 font-semibold mb-2 text-sm uppercase tracking-wide">Nombre</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required
                class="w-full px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-purple-400 transition-all duration-300"
                placeholder="Tu nombre"
              >
            </div>

            <div>
              <label for="email" class="block text-white/90 font-semibold mb-2 text-sm uppercase tracking-wide">Correo Electrónico</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required
                class="w-full px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-purple-400 transition-all duration-300"
                placeholder="tu@email.com"
              >
            </div>

            <div>
              <label for="message" class="block text-white/90 font-semibold mb-2 text-sm uppercase tracking-wide">Mensaje</label>
              <textarea 
                id="message" 
                name="message" 
                rows="5" 
                required
                class="w-full px-5 py-4 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-purple-400 transition-all duration-300 resize-none"
                placeholder="¿Cómo podemos ayudarte?"
              ></textarea>
            </div>

            <button 
              type="submit" 
              id="submit-button"
              class="w-full py-4 px-8 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl text-lg font-bold transition-all duration-300 hover:scale-[1.02] hover:shadow-xl active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed"
            >
              <span id="button-text">Enviar Mensaje</span>
            </button>
          </form>
          
          <!-- Status Messages -->
          <div id="form-status" class="mt-4 text-center hidden">
            <p id="status-message" class="text-lg font-medium"></p>
          </div>
        </div>

        <!-- Brief Contact Info -->
        <div class="text-center text-white/60 space-y-2">
          <p>O escríbenos directamente a: <a href="mailto:info@miherenciacosmica.com" class="text-purple-400 hover:text-purple-300 transition-colors">info@miherenciacosmica.com</a></p>
          <p class="text-sm italic">Respondemos en menos de 48 horas.</p>
        </div>
      </div>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('contact-form') as HTMLFormElement;
    const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
    const buttonText = document.getElementById('button-text') as HTMLSpanElement;
    const formStatus = document.getElementById('form-status') as HTMLDivElement;
    const statusMessage = document.getElementById('status-message') as HTMLParagraphElement;

    if (form) {
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Disable button and show loading state
        submitButton.disabled = true;
        buttonText.textContent = 'Enviando...';
        formStatus.classList.add('hidden');

        const formData = new FormData(form);
        
        try {
          const response = await fetch(form.action, {
            method: form.method,
            body: formData,
            headers: {
              'Accept': 'application/json'
            }
          });

          if (response.ok) {
            // Success
            statusMessage.textContent = '¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto. ✨';
            statusMessage.className = 'text-green-400 font-medium';
            formStatus.classList.remove('hidden');
            form.reset();
          } else {
            // Server error
            const data = await response.json();
            throw new Error(data.error || 'Hubo un problema al enviar el mensaje.');
          }
        } catch (error) {
          // Network or other error
          statusMessage.textContent = 'Ocurrió un error al enviar el mensaje. Por favor, inténtalo de nuevo más tarde.';
          statusMessage.className = 'text-red-400 font-medium';
          formStatus.classList.remove('hidden');
        } finally {
          // Re-enable button
          submitButton.disabled = false;
          buttonText.textContent = 'Enviar Mensaje';
        }
      });
    }
  });
</script>